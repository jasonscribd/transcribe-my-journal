<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Journal Transcriber</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">


</head>
<body>
  <header>
    <h1>üìñ Journal Transcriber</h1>
    <div class="upload-section">
      <input type="file" id="fileInput" accept=".pdf,image/*" hidden />
      <button id="uploadBtn" class="btn btn-primary btn-upload-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
          <polyline points="14,2 14,8 20,8"/>
          <line x1="12" y1="18" x2="12" y2="12"/>
          <line x1="9" y1="15" x2="12" y2="12"/>
          <line x1="15" y1="15" x2="12" y2="12"/>
        </svg>
        Upload Pages
      </button>
    </div>
  </header>

  <!-- Drag & drop overlay -->
  <div id="dropOverlay" class="hidden">
    <p>Drop your PDF or image here</p>
  </div>
  <!-- Status overlay -->
  <div id="statusOverlay" class="hidden"><p id="statusText">Processing...</p></div>

  <main id="app">
    <div id="pageNavigation" class="hidden">
      <button id="prevPageBtn" class="btn btn-secondary">‚Üê Previous</button>
      <span id="pageIndicator">Page 1 of 1</span>
      <button id="nextPageBtn" class="btn btn-secondary">Next ‚Üí</button>
    </div>

    <div id="content">
      <div id="imagePane">
        <canvas id="pageCanvas" class="hidden"></canvas>
        <div id="emptyState">
          <h2>üìÑ Ready to Transcribe</h2>
          <p>Upload a PDF or image file using the button above to get started.</p>
        </div>
      </div>
      
      <div id="viewToggle" class="hidden">
        <button id="showImageBtn" class="btn btn-secondary toggle-btn active">Original</button>
        <button id="showTranscriptBtn" class="btn btn-secondary toggle-btn">Transcript</button>
      </div>
      
      <div id="transcriptPane" class="hidden">
        <textarea id="transcriptArea" placeholder="Transcript will appear here..."></textarea>
      </div>
    </div>
  </main>

  <!-- Bottom toolbar -->
  <footer>
    <button id="settingsBtn" class="btn btn-secondary">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      Settings
    </button>
    <button id="exportBtn" class="btn btn-primary" disabled>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7,10 12,15 17,10"/>
        <line x1="12" y1="15" x2="12" y2="3"/>
      </svg>
      Export
    </button>
  </footer>

  <!-- Settings Modal -->
  <dialog id="settingsDialog">
    <form method="dialog">
      <h2>Settings</h2>
      <label>
        OpenAI API Key
        <input type="password" id="apiKeyInput" placeholder="sk-..." />
      </label>
      <label>
        Model Name
        <input type="text" id="modelInput" value="gpt-4o-mini" />
      </label>
      <label>
        System Prompt
        <textarea id="promptInput" rows="4">You are a helpful assistant that accurately transcribes handwritten journal entries into clean, well-punctuated plain text while preserving line breaks and the personal tone.</textarea>
      </label>
      <div class="settings-section">
        <h3>Export Options</h3>
        <button id="exportAllBtn" type="button" class="btn btn-secondary btn-full-width">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <line x1="10" y1="9" x2="8" y2="9"/>
          </svg>
          Export All Transcripts as TXT
        </button>
      </div>
      <menu>
        <button type="submit" class="btn btn-primary">Save</button>
        <button id="resetKeyBtn" type="button" class="btn btn-danger">Reset Key</button>
        <button id="closeSettingsBtn" type="button" class="btn btn-secondary">Close</button>
      </menu>
    </form>
  </dialog>

  <script type="module" src="main.js"></script>
</body>
</html>
